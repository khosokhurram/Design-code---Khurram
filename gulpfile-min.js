var gulp=require("gulp"),browserSync=require("browser-sync"),sass=require("gulp-sass"),prefix=require("gulp-autoprefixer"),cp=require("child_process"),jekyll="win32"===process.platform?"jekyll.bat":"jekyll",messages={jekyllBuild:'<span style="color: grey">Running:</span> $ jekyll build'};gulp.task("jekyll-build",function(s){return browserSync.notify(messages.jekyllBuild),cp.spawn(jekyll,["build"],{stdio:"inherit"}).on("close",s)}),gulp.task("jekyll-rebuild",["jekyll-build"],function(){browserSync.reload()}),gulp.task("browser-sync",["sass","jekyll-build"],function(){browserSync({server:{baseDir:"_site"}})}),gulp.task("sass",function(){return gulp.src("_scss/main.scss").pipe(sass({includePaths:["scss"],onError:browserSync.notify})).pipe(prefix(["last 15 versions","> 1%","ie 8","ie 7"],{cascade:!0})).pipe(gulp.dest("_site/css")).pipe(browserSync.reload({stream:!0})).pipe(gulp.dest("css"))}),gulp.task("watch",function(){gulp.watch("_scss/*.scss",["sass"]),gulp.watch(["*.html","_layouts/*.html","_posts/*"],["jekyll-rebuild"])}),gulp.task("default",["browser-sync","watch"]);